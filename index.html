<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>github-diff-submodules</title>
    <link href="https://bootswatch.com/lumen/bootstrap.min.css" rel="stylesheet" type="text/css" />
  </head>

  <body class="container">
    <h1>github-diff-submodules <small>v1.0.0-alpha.2</small></h1>
    <p class="lead">script to display submodule diffs in github.com diff views</p>
    <h2>install</h2>
    <h3>bookmarklet</h3>
    <p class="lead">drag this to your bookmarks bar:</p>
    <p class="lead">
      <a href="javascript:(function()%7Bfunction%20GithubDiffSubmodules(t)%7Bvar%20i%3D%24(findSubmodules(t))%2Cn%3Dt.find(%22.commit%20a.btn.right%22).attr(%22href%22)%3Bi%26%26n%26%26%24.get(n%2Cfunction(t)%7Bvar%20n%3D%24(t)%3B%24(i).each(function()%7Bvar%20t%3Dthis%2Ci%3DgetSubmoduleUrl(n%2Ct.path)%2Ce%3DbuildCompareUrl(i%2Ct.diff)%3Be%26%26%24.get(e%2Cfunction(i)%7Bvar%20n%3D%24(i)%2Ce%3Dn.find(%22%23files%20.file%22)%3Be.each(function()%7Bvar%20i%3D%24(this)%3Bi.attr(%22id%22%2Ct.path%2B%22-%22%2Bi.attr(%22id%22))%2Ci.find(%22.file-header%20.file-info%20.user-select-contain%22).each(function()%7Bvar%20i%3D%24(this)%2Cn%3D%22%2F%22%2B%24.trim(i.text())%3Bi.html(%24(%22%3Cstrong%3E%22).text(t.path).add(%24(%22%3Cspan%3E%22).text(n%2B%22%20(submodule)%22))).attr(%22title%22%2Ct.path%2Bn)%7D)%7D)%3Bvar%20r%3D%24(%22%3Cdiv%3E%22).data(%22type%22%2C%22submodule-diff%22).append(e)%3B%24(t.node).after(r)%7D)%7D)%7D)%7Dvar%20trimCommitHash%3Dfunction(t)%7Bvar%20i%3Dt%26%26t.first%26%26t.first().text()%3Bif(%22string%22%3D%3Dtypeof%20i%26%26i.match(%2FSubproject%5C%20commit%5C%20%2F))return%20i.replace(%2F%5E%5Cs*(%5C%2B%7C-)Subproject%5C%20commit%5C%20(%5B0-9a-f%5D*)%5Cs*%24%2F%2C%22%241%242%22)%7D%2CbuildCompareUrl%3Dfunction(t%2Ci)%7Bif(%22string%22%3D%3Dtypeof%20t%26%26i%26%26i.old%26%26i.new)%7Bvar%20n%3Di.old.slice(1)%2Ce%3Di.new.slice(1)%3Breturn%20t.split(%22%2F%22).concat(%5B%22compare%22%2Cn%2B%22...%22%2Be%5D).join(%22%2F%22)%7D%7D%2CfindSubmodules%3Dfunction(t)%7Breturn%20t.find(%22.file%22).map(function()%7Bvar%20t%3D%24(this)%2Ci%3Dt.filter(function()%7Breturn%200!%3D%3D%24(this).data().position%7D).map(function()%7Bvar%20t%3D%24(this)%3Breturn%7Bold%3AtrimCommitHash(t.find(%22.blob-code-deletion%22))%2C%22new%22%3AtrimCommitHash(t.find(%22.blob-code-addition%22))%7D%7D).filter(function(t)%7Breturn!(t%26%26t.old%26%26t.new%26%26t.old.length%3E1%26%26t.old.length%3E1)%7D).get(0)%3Bif(i%26%26i.old%26%26i.new)%7Bvar%20n%3D%7Bdiff%3Ai%2Cpath%3A%24.trim(t.find(%22.user-select-contain%22).attr(%22title%22))%2Cnode%3At%7D%3Breturn%20n%7D%7D)%7D%2CfindFilenamesInRepoListing%3Dfunction(t)%7Breturn%20t.find(%22.file-wrap%20tr%22).map(function()%7Breturn%20%24(this).find(%22.content%20span%20a%3Afirst%22)%7D)%7D%2CgetSubmoduleUrl%3Dfunction(t%2Ci)%7Bvar%20n%3DfindFilenamesInRepoListing(t).filter(function()%7Breturn%20%24(this).text()%3D%3D%3Di%7D).get(0)%3Breturn%20n%26%26n.attr%3Fn.attr(%22href%22)%3Avoid%200%7D%3BGithubDiffSubmodules(%24(%22body%22))%3B%7D)()" class="btn btn-info btn-lg">gh diff submodules</a>
    </p>
    <p class="lead">
      <small>(or copy the link and install manually)</small>
    </p>
    <h3>userscript (greasemonkey and similar)</h3>
    <p class="lead">
      <strong>use this for fireox!</strong>
    </p>
    <p class="lead">
      <a href="github-diff-submodules.user.js" class="btn btn-info btn-md">install userscript</a>
    </p>
    <h2>info</h2>
    <ul>
      <li>
        <a href="https://github.com/eins78/github-diff-submodules#readme">
          github repo</a></li>
      <li>
        <a href="https://en.wikipedia.org/wiki/Bookmarklet">
          wikipedia: bookmarklet</a></li>
    </ul>
</body>
</html>
